<!DOCTYPE html>
<html>
  <head>
    <title>Data Layer: Simple</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <style>
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      #map {
        height: 100%;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>

    <script>

  var styles = [
  {
      featureType: "road",
      elementType: "geometry",
      stylers: [
        { lightness: 100 },
      ]
    }
  ];

  var map;
function initMap() {
    var styledMap = new google.maps.StyledMapType(styles,
      {name: "Styled Map"});
      var mapOptions = {
      zoom: 15,
      center: {lat: 33.78, lng: -84.39},
      mapTypeControlOptions: {
        mapTypeIds: [google.maps.MapTypeId.ROADMAP, 'map_style']
      }
  };

  var myLatLng = new google.maps.LatLng( 33.78, -84.39 )

  var map = new google.maps.Map(document.getElementById('map'),
    mapOptions),marker = new google.maps.Marker( {position: myLatLng, map: map} );
;

  map.mapTypes.set('map_style', styledMap);
  map.setMapTypeId('map_style');

  map.data.loadGeoJson('geojson/gt_routes.geojson');

  map.data.setStyle(function(feature) {
  var color = feature.getProperty('routeColor');
  return {
      strokeColor: '#'+color,
      strokeWeight: 3,
      strokeOpacity: 0.5
      };
  });


    
    marker.setMap( map );
    moveMarker( map, marker );

}

function moveMarker( map, marker ) {
    
    //delayed so you can see it move
    setTimeout( function(){ 
        marker.setPosition( new google.maps.LatLng( 33.78, -84.38 ) );
      }, 1500 );

};

    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDH08yE2_pwj89i0Hxn2C7g5h42k4QBSL4 &callback=initMap">
    </script>
  </body>
</html>